# ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

ะะพะดัะพะฑะฝะพะต ะพะฟะธัะฐะฝะธะต ััััะบัััั ะธ ะฝะฐะทะฝะฐัะตะฝะธั ัะฐะนะปะพะฒ ะฟัะพะตะบัะฐ.

```
student-bot/
โ
โโโ ๐ main.py                      # ะขะพัะบะฐ ะฒัะพะดะฐ, ะทะฐะฟััะบ ะฑะพัะฐ
โโโ ๐ config.py                    # ะะพะฝัะธะณััะฐัะธั ะฟัะธะปะพะถะตะฝะธั
โโโ ๐ requirements.txt             # Python ะทะฐะฒะธัะธะผะพััะธ
โโโ ๐ .env.example                 # ะัะธะผะตั ะบะพะฝัะธะณััะฐัะธะพะฝะฝะพะณะพ ัะฐะนะปะฐ
โโโ ๐ .env                         # ะะพะฝัะธะณััะฐัะธั (ัะพะทะดะฐะตััั ะฒะฐะผะธ, ะฝะต ะฒ git)
โโโ ๐ .gitignore                   # ะะณะฝะพัะธััะตะผัะต git ัะฐะนะปั
โ
โโโ ๐ README.md                    # ะัะฝะพะฒะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั
โโโ ๐ QUICKSTART.md                # ะัััััะน ััะฐัั
โโโ ๐ TECHNICAL_SPECIFICATION.md  # ะขะตัะฝะธัะตัะบะพะต ะทะฐะดะฐะฝะธะต
โโโ ๐ PROJECT_STRUCTURE.md         # ะญัะพั ัะฐะนะป
โ
โโโ ๐ setup.py                     # ะกะบัะธะฟั ะฟะตัะฒะพะฝะฐัะฐะปัะฝะพะน ะฝะฐัััะพะนะบะธ
โโโ ๐ add_sample_data.py           # ะกะบัะธะฟั ะดะพะฑะฐะฒะปะตะฝะธั ัะตััะพะฒัั ะดะฐะฝะฝัั
โโโ ๐ start.bat                    # ะะฐะฟััะบ ะฝะฐ Windows
โ
โโโ ๐ bot/                         # ะัะฝะพะฒะฝะพะน ะฟะฐะบะตั ะฑะพัะฐ
โ   โโโ ๐ __init__.py
โ   โ
โ   โโโ ๐ database/                # ะะฐะฑะพัะฐ ั ะฑะฐะทะพะน ะดะฐะฝะฝัั
โ   โ   โโโ ๐ __init__.py
โ   โ   โโโ ๐ models.py           # SQLAlchemy ะผะพะดะตะปะธ (ัะฐะฑะปะธัั ะะ)
โ   โ   โโโ ๐ engine.py           # ะะพะดะบะปััะตะฝะธะต ะบ ะะ, ัะพะทะดะฐะฝะธะต ัะฐะฑะปะธั
โ   โ   โโโ ๐ crud.py             # CRUD ะพะฟะตัะฐัะธะธ (Create, Read, Update, Delete)
โ   โ
โ   โโโ ๐ handlers/                # ะะฑัะฐะฑะพััะธะบะธ ะบะพะผะฐะฝะด ะธ callback'ะพะฒ
โ   โ   โโโ ๐ __init__.py
โ   โ   โโโ ๐ user.py             # ะะฐะทะพะฒัะต ะบะพะผะฐะฝะดั (/start, /menu, /help)
โ   โ   โโโ ๐ catalog.py          # ะะฐัะฐะปะพะณ ะฟัะพะตะบัะพะฒ, ะฟัะพัะผะพัั, ัะธะปัััะฐัะธั
โ   โ   โโโ ๐ cart.py             # ะะพัะทะธะฝะฐ ะฟะพะบัะฟะพะบ
โ   โ   โโโ ๐ orders.py           # ะะฐะบะฐะทั (ะฟะพะบัะฟะบะธ ะธ ะธะฝะดะธะฒะธะดัะฐะปัะฝัะต)
โ   โ   โโโ ๐ profile.py          # ะัะพัะธะปั ะฟะพะปัะทะพะฒะฐัะตะปั
โ   โ   โโโ ๐ support.py          # ะะพะดะดะตัะถะบะฐ, ัะธะบะตัั, FAQ
โ   โ   โโโ ๐ admin.py            # ะะดะผะธะฝ-ะฟะฐะฝะตะปั
โ   โ
โ   โโโ ๐ keyboards/               # ะะปะฐะฒะธะฐัััั (ะบะฝะพะฟะบะธ)
โ   โ   โโโ ๐ __init__.py
โ   โ   โโโ ๐ user.py             # ะะพะปัะทะพะฒะฐัะตะปััะบะธะต ะบะปะฐะฒะธะฐัััั
โ   โ   โโโ ๐ admin.py            # ะะดะผะธะฝัะบะธะต ะบะปะฐะฒะธะฐัััั
โ   โ
โ   โโโ ๐ states/                  # FSM ัะพััะพัะฝะธั ะดะปั ะดะธะฐะปะพะณะพะฒ
โ   โ   โโโ ๐ __init__.py
โ   โ   โโโ ๐ order.py            # ะกะพััะพัะฝะธั ะดะปั ัะพะทะดะฐะฝะธั ะทะฐะบะฐะทะพะฒ ะธ ะดั.
โ   โ
โ   โโโ ๐ middlewares/             # Middleware (ะฟัะพะผะตะถััะพัะฝะฐั ะพะฑัะฐะฑะพัะบะฐ)
โ   โ   โโโ ๐ __init__.py
โ   โ   โโโ ๐ database.py         # ะัะตะดะพััะฐะฒะปะตะฝะธะต ัะตััะธะธ ะะ
โ   โ
โ   โโโ ๐ utils/                   # ะฃัะธะปะธัั ะธ ะฒัะฟะพะผะพะณะฐัะตะปัะฝัะต ััะฝะบัะธะธ
โ   โ   โโโ ๐ __init__.py
โ   โ   โโโ ๐ helpers.py          # ะคะพัะผะฐัะธัะพะฒะฐะฝะธะต, ัะผะพะดะทะธ ะธ ะดั.
โ   โ
โ   โโโ ๐ filters/                 # ะคะธะปัััั ะดะปั handlers
โ   โ   โโโ ๐ __init__.py
โ   โ
โ   โโโ ๐ services/                # ะะธะทะฝะตั-ะปะพะณะธะบะฐ (ัะตัะฒะธัั)
โ       โโโ ๐ __init__.py
โ
โโโ ๐ uploads/                     # ะะฐะณััะถะตะฝะฝัะต ัะฐะนะปั (ะฝะต ะฒ git)
โ   โโโ ๐ projects/                # ะคะฐะนะปั ะณะพัะพะฒัั ะฟัะพะตะบัะพะฒ
โ   โโโ ๐ orders/                  # ะคะฐะนะปั ะธะฝะดะธะฒะธะดัะฐะปัะฝัั ะทะฐะบะฐะทะพะฒ
โ
โโโ ๐ student_bot.db               # SQLite ะฑะฐะทะฐ ะดะฐะฝะฝัั (ัะพะทะดะฐะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธ)
```

## ๐ ะะฟะธัะฐะฝะธะต ะบะปััะตะฒัั ะผะพะดัะปะตะน

### ๐๏ธ Database (bot/database/)

#### models.py
ะะฟัะตะดะตะปัะตั ััััะบัััั ะฑะฐะทั ะดะฐะฝะฝัั ั ะฟะพะผะพััั SQLAlchemy ORM.

**ะัะฝะพะฒะฝัะต ะผะพะดะตะปะธ:**
- `User` - ะฟะพะปัะทะพะฒะฐัะตะปะธ ะฑะพัะฐ
- `Admin` - ะฐะดะผะธะฝะธัััะฐัะพัั ั ััะพะฒะฝัะผะธ ะดะพัััะฟะฐ
- `Category` - ะบะฐัะตะณะพัะธะธ ะฟัะพะตะบัะพะฒ
- `Project` - ะณะพัะพะฒัะต ะฟัะพะตะบัั ะฒ ะบะฐัะฐะปะพะณะต
- `Order` - ะธะฝะดะธะฒะธะดัะฐะปัะฝัะต ะทะฐะบะฐะทั
- `Purchase` - ะฟะพะบัะฟะบะธ ะณะพัะพะฒัั ะฟัะพะตะบัะพะฒ
- `Cart` - ะบะพัะทะธะฝะฐ ะฟะพะบัะฟะพะบ
- `SupportTicket` - ัะธะบะตัั ะฟะพะดะดะตัะถะบะธ
- `Broadcast` - ะธััะพัะธั ัะฐัััะปะพะบ
- `Review` - ะพัะทัะฒั ะธ ะพัะตะฝะบะธ

**Enum'ั:**
- `UserRole` - ัะพะปะธ (admin, manager, content_manager)
- `OrderStatus` - ััะฐัััั ะทะฐะบะฐะทะพะฒ (new, in_progress, completed, etc.)
- `ProjectType` - ัะธะฟั ะฟัะพะตะบัะพะฒ (diploma, coursework, presentation, project)
- `ProjectLevel` - ััะพะฒะตะฝั ัะปะพะถะฝะพััะธ (basic, intermediate, advanced)
- `TicketStatus` - ััะฐัััั ัะธะบะตัะพะฒ (open, in_progress, closed)

#### engine.py
ะะฐัััะพะนะบะฐ ะฟะพะดะบะปััะตะฝะธั ะบ ะฑะฐะทะต ะดะฐะฝะฝัั.

- `Base` - ะฑะฐะทะพะฒัะน ะบะปะฐัั ะดะปั ะผะพะดะตะปะตะน
- `engine` - ะฐัะธะฝััะพะฝะฝัะน ะดะฒะธะถะพะบ ะะ
- `async_session_maker` - ัะฐะฑัะธะบะฐ ะดะปั ัะพะทะดะฐะฝะธั ัะตััะธะน
- `init_db()` - ะธะฝะธัะธะฐะปะธะทะฐัะธั ะะ (ัะพะทะดะฐะฝะธะต ัะฐะฑะปะธั)
- `get_session()` - ะฟะพะปััะตะฝะธะต ัะตััะธะธ

#### crud.py
CRUD ะพะฟะตัะฐัะธะธ ะดะปั ัะฐะฑะพัั ั ะดะฐะฝะฝัะผะธ.

**ะคัะฝะบัะธะธ ะดะปั ะบะฐะถะดะพะน ะผะพะดะตะปะธ:**
- `create_*` - ัะพะทะดะฐะฝะธะต ะทะฐะฟะธัะธ
- `get_*` - ะฟะพะปััะตะฝะธะต ะทะฐะฟะธัะธ/ะทะฐะฟะธัะตะน
- `update_*` - ะพะฑะฝะพะฒะปะตะฝะธะต ะทะฐะฟะธัะธ
- `delete_*` - ัะดะฐะปะตะฝะธะต ะทะฐะฟะธัะธ

### ๐ฎ Handlers (bot/handlers/)

#### user.py
ะะฐะทะพะฒัะต ะบะพะผะฐะฝะดั ะธ ะฝะฐะฒะธะณะฐัะธั.
- `/start` - ะฟัะธะฒะตัััะฒะธะต ะธ ัะตะณะธัััะฐัะธั
- `/menu` - ะณะปะฐะฒะฝะพะต ะผะตะฝั
- `/help` - ัะฟัะฐะฒะบะฐ
- `/admin` - ะฐะดะผะธะฝ-ะฟะฐะฝะตะปั
- ะะฑัะฐะฑะพัะบะฐ callback'ะพะฒ ะฝะฐะฒะธะณะฐัะธะธ

#### catalog.py
ะะฐัะฐะปะพะณ ะฟัะพะตะบัะพะฒ.
- ะัะพัะผะพัั ะฒัะตั ะฟัะพะตะบัะพะฒ
- ะคะธะปัััะฐัะธั ะฟะพ ะบะฐัะตะณะพัะธัะผ ะธ ัะธะฟะฐะผ
- ะะฐะณะธะฝะฐัะธั
- ะัะพัะผะพัั ะดะตัะฐะปะตะน ะฟัะพะตะบัะฐ
- ะะพะฑะฐะฒะปะตะฝะธะต ะฒ ะบะพัะทะธะฝั
- ะกะบะฐัะธะฒะฐะฝะธะต ะบัะฟะปะตะฝะฝัั ะฟัะพะตะบัะพะฒ

#### cart.py
ะะพัะทะธะฝะฐ ะฟะพะบัะฟะพะบ.
- ะัะพัะผะพัั ะบะพัะทะธะฝั
- ะฃะดะฐะปะตะฝะธะต ะธะท ะบะพัะทะธะฝั
- ะัะธััะบะฐ ะบะพัะทะธะฝั
- ะัะพัะผะปะตะฝะธะต ะทะฐะบะฐะทะฐ (checkout)
- ะะณะฝะพะฒะตะฝะฝะฐั ะฟะพะบัะฟะบะฐ (buy now)

#### orders.py
ะฃะฟัะฐะฒะปะตะฝะธะต ะทะฐะบะฐะทะฐะผะธ.
- ะัะพัะผะพัั ะฟะพะบัะฟะพะบ
- ะัะพัะผะพัั ะธะฝะดะธะฒะธะดัะฐะปัะฝัั ะทะฐะบะฐะทะพะฒ
- ะกะพะทะดะฐะฝะธะต ะธะฝะดะธะฒะธะดัะฐะปัะฝะพะณะพ ะทะฐะบะฐะทะฐ (FSM)
- ะะตัะฐะปะธ ะทะฐะบะฐะทะฐ

#### profile.py
ะัะพัะธะปั ะฟะพะปัะทะพะฒะฐัะตะปั.
- ะัะพัะผะพัั ะฟัะพัะธะปั
- ะกัะฐัะธััะธะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปั
- ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะฟัะพัะธะปั (ะฒ ัะฐะทัะฐะฑะพัะบะต)

#### support.py
ะกะธััะตะผะฐ ะฟะพะดะดะตัะถะบะธ.
- ะกะพะทะดะฐะฝะธะต ัะธะบะตัะฐ
- ะัะพัะผะพัั ัะธะบะตัะพะฒ
- FAQ

#### admin.py
ะะดะผะธะฝ-ะฟะฐะฝะตะปั.
- ะกัะฐัะธััะธะบะฐ
- ะฃะฟัะฐะฒะปะตะฝะธะต ะบะฐัะฐะปะพะณะพะผ
- ะฃะฟัะฐะฒะปะตะฝะธะต ะทะฐะบะฐะทะฐะผะธ
- ะะฐัััะปะบะฐ
- ะฃะฟัะฐะฒะปะตะฝะธะต ะบะฐัะตะณะพัะธัะผะธ
- ะฃะฟัะฐะฒะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ

### โจ๏ธ Keyboards (bot/keyboards/)

#### user.py
ะะปะฐะฒะธะฐัััั ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน.
- `get_main_menu()` - ะณะปะฐะฒะฝะพะต ะผะตะฝั
- `get_catalog_menu()` - ะผะตะฝั ะบะฐัะฐะปะพะณะฐ
- `get_project_card_keyboard()` - ะบะฝะพะฟะบะธ ะบะฐััะพัะบะธ ะฟัะพะตะบัะฐ
- `get_pagination_keyboard()` - ะฟะฐะณะธะฝะฐัะธั
- `get_cart_keyboard()` - ะบะพัะทะธะฝะฐ
- `get_order_types_keyboard()` - ัะธะฟั ะทะฐะบะฐะทะพะฒ
- ะ ะผะฝะพะณะพะต ะดััะณะพะต...

#### admin.py
ะะปะฐะฒะธะฐัััั ะดะปั ะฐะดะผะธะฝะธัััะฐัะพัะพะฒ.
- `get_admin_menu()` - ะณะปะฐะฒะฝะพะต ะผะตะฝั ะฐะดะผะธะฝะฐ
- `get_admin_catalog_menu()` - ัะฟัะฐะฒะปะตะฝะธะต ะบะฐัะฐะปะพะณะพะผ
- `get_admin_orders_menu()` - ัะฟัะฐะฒะปะตะฝะธะต ะทะฐะบะฐะทะฐะผะธ
- `get_admin_broadcast_menu()` - ัะฐัััะปะบะฐ
- ะ ะดั.

### ๐ States (bot/states/)

#### order.py
FSM ัะพััะพัะฝะธั ะดะปั ะดะธะฐะปะพะณะพะฒ.
- `OrderStates` - ัะพะทะดะฐะฝะธะต ะธะฝะดะธะฒะธะดัะฐะปัะฝะพะณะพ ะทะฐะบะฐะทะฐ
- `EditProfileStates` - ัะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะฟัะพัะธะปั
- `SupportStates` - ัะพะทะดะฐะฝะธะต ัะธะบะตัะฐ
- `AdminProjectStates` - ัะฟัะฐะฒะปะตะฝะธะต ะฟัะพะตะบัะฐะผะธ
- `AdminOrderStates` - ัะฟัะฐะฒะปะตะฝะธะต ะทะฐะบะฐะทะฐะผะธ
- `AdminBroadcastStates` - ัะฐัััะปะบะฐ
- `AdminCategoryStates` - ัะฟัะฐะฒะปะตะฝะธะต ะบะฐัะตะณะพัะธัะผะธ

### ๐ง Utils (bot/utils/)

#### helpers.py
ะัะฟะพะผะพะณะฐัะตะปัะฝัะต ััะฝะบัะธะธ.
- `format_price()` - ัะพัะผะฐัะธัะพะฒะฐะฝะธะต ัะตะฝั
- `format_datetime()` - ัะพัะผะฐัะธัะพะฒะฐะฝะธะต ะดะฐัั
- `truncate_text()` - ะพะฑัะตะทะบะฐ ัะตะบััะฐ
- `get_project_type_emoji()` - ัะผะพะดะทะธ ะดะปั ัะธะฟะพะฒ
- `get_order_status_emoji()` - ัะผะพะดะทะธ ะดะปั ััะฐัััะพะฒ
- `get_level_emoji()` - ัะผะพะดะทะธ ััะพะฒะฝะตะน
- ะ ะดั.

### ๐ก๏ธ Middlewares (bot/middlewares/)

#### database.py
Middleware ะดะปั ะฟัะตะดะพััะฐะฒะปะตะฝะธั ัะตััะธะธ ะะ ะฒ handlers.

ะะฒัะพะผะฐัะธัะตัะบะธ ัะพะทะดะฐะตั ะธ ะทะฐะบััะฒะฐะตั ัะตััะธั ะดะปั ะบะฐะถะดะพะณะพ ะทะฐะฟัะพัะฐ.

## ๐ ะะพัะพะบ ะดะฐะฝะฝัั

```
ะะพะปัะทะพะฒะฐัะตะปั ะพัะฟัะฐะฒะปัะตั ะบะพะผะฐะฝะดั/callback
         โ
    ะะธัะฟะตััะตั (Dispatcher)
         โ
    Middleware (ัะพะทะดะฐะฝะธะต ัะตััะธะธ ะะ)
         โ
    Handler (ะพะฑัะฐะฑะพัะบะฐ)
         โ
    CRUD ะพะฟะตัะฐัะธะธ (ัะฐะฑะพัะฐ ั ะะ)
         โ
    Keyboard (ัะพัะผะธัะพะฒะฐะฝะธะต ะพัะฒะตัะฐ)
         โ
    ะัะฒะตั ะฟะพะปัะทะพะฒะฐัะตะปั
```

## ๐ฏ ะะฐะบ ะดะพะฑะฐะฒะธัั ะฝะพะฒัั ััะฝะบัะธั?

### ะัะธะผะตั: ะะพะฑะฐะฒะปะตะฝะธะต ัะธััะตะผั ัะตะนัะธะฝะณะฐ ะฟัะพะตะบัะพะฒ

1. **ะะพะฑะฐะฒะธัั ะผะพะดะตะปั ะฒ models.py:**
```python
class Rating(Base):
    __tablename__ = 'ratings'
    id: Mapped[int] = mapped_column(primary_key=True)
    user_id: Mapped[int] = mapped_column(ForeignKey('users.id'))
    project_id: Mapped[int] = mapped_column(ForeignKey('projects.id'))
    stars: Mapped[int] = mapped_column(Integer)  # 1-5
```

2. **ะะพะฑะฐะฒะธัั CRUD ะฒ crud.py:**
```python
async def create_rating(session, user_id, project_id, stars):
    rating = Rating(user_id=user_id, project_id=project_id, stars=stars)
    session.add(rating)
    await session.commit()
    return rating
```

3. **ะกะพะทะดะฐัั handler ะฒ handlers/rating.py:**
```python
@router.callback_query(F.data.startswith("rate_"))
async def rate_project(callback: CallbackQuery, session: AsyncSession):
    # ะะพะณะธะบะฐ ะพัะตะฝะบะธ
    pass
```

4. **ะะพะฑะฐะฒะธัั ะบะปะฐะฒะธะฐัััั ะฒ keyboards/user.py:**
```python
def get_rating_keyboard(project_id):
    builder = InlineKeyboardBuilder()
    for i in range(1, 6):
        builder.button(text=f"{'โญ' * i}", callback_data=f"rate_{project_id}_{i}")
    return builder.as_markup()
```

5. **ะะฐัะตะณะธัััะธัะพะฒะฐัั router ะฒ main.py:**
```python
from bot.handlers import rating
dp.include_router(rating.router)
```

## ๐ก ะกะพะฒะตัั ะฟะพ ัะฐะทัะฐะฑะพัะบะต

1. **ะะพะดัะปัะฝะพััั:** ะะฐะถะดัะน ะผะพะดัะปั ะพัะฒะตัะฐะตั ะทะฐ ะพะดะฝั ะพะฑะปะฐััั
2. **Async/Await:** ะัะต ะพะฟะตัะฐัะธะธ ะฐัะธะฝััะพะฝะฝัะต
3. **ะขะธะฟะธะทะฐัะธั:** ะัะฟะพะปัะทัะนัะต type hints
4. **ะกะตััะธะธ ะะ:** ะัะตะณะดะฐ ะฟะตัะตะดะฐัััั ัะตัะตะท middleware
5. **ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ:** ะัะฟะพะปัะทัะนัะต try/except ะฒ ะบัะธัะธัะฝัั ะผะตััะฐั
6. **ะะพะณะธัะพะฒะฐะฝะธะต:** ะัะฟะพะปัะทัะนัะต logger ะดะปั ะพัะปะฐะดะบะธ

---

**ะฃะดะฐัะฝะพะน ัะฐะทัะฐะฑะพัะบะธ! ๐**

